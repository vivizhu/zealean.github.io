
---
layout: post
title: 前端与后台调试过程常见问题
tags: 总结与分享
---


#####微信中，如果支付完之后页面没有跳转还是停留在当前页面

检查js脚本引入有没有问题或者脚本有没有报错。

方法：在谷歌浏览器中直接访问确认支付的jsp页面进行调试


#####页面跳转报404
1. 检查对应的jsp是不是不存在<br/>
   方法：在谷歌浏览器中直接访问jsp地址，看是否报404，如果报404，说明jsp没有放到服务器相应的目录
  
2. 如果对应的jsp存在，检查ptstwebconfig表和ptstpageconfig表是否配置

3. 如果ptstwebconfig表和ptstpageconfig表已经配置了，请检查请求参数中的viewocode对应的值和数据库表中的viewcode值是否一致。

4. 如果以上都没有问题，请检查有没有重启参数服务

5. 如果是微信支付确认的页面报404，检查ptstwebconfig表配置的时候字段CONTEXT是否为`/wxpay`


#####页面报500

   首先，一般情况下，报500都是后台的问题，但是如果后台日志显示交易返回成功，则有可能出现如下情况：
 
1. **jsp中有include  jsp的，要检查被include 的jsp的路径有没有问**
   方法：根据被include的jsp路径，去服务器上查看有没有对应的jsp存在
   
   目前在开发中有个很严重的问题，就是引用路径可能是另外一个项目的。
   首先在开发的时候，如果copy了一个已有工程目录的文件，请先把引用路径改成当前项目的，不如jsp引用、js、css、images等等。**所有引用的路径都必须是当前项目的，不能是其他项目的**。

2. **检查页面jstl标签是否没闭合**
  
      方法1：在谷歌浏览器中直接访问jsp，如果依旧报错，就基本可以断定是jstl标签哪里写错了
      
      方法2：查看日志：步骤1）打开xshell，进入相应地址，在命令窗口敲cdb,回车;步骤2）敲命令 vi nohup.out 回车进行查看

3. **检查页面是否有金额字段**
   
   页面jstl标签没有问题，可能是因为当前页面的某个金额字段值为空，因为页面需要显示的金额都是需要整除100的，当页面获取到的金额为空时再除以100时会报错。
  

  
#####页面报“对不起，禁止访问”
  
  这种情况***必然是ptstwebconfig表配置有问题***。没配，or配错了,or没有重启参数服务。
          
#####后台交易返回成功，但是页面没有获取到应该获取到的数据
后台看日志坚称数据已经返回到页面，而页面确实没有看到相应的数据，此时，要耐心以及细心：

1. 比对后台返回的字段和页面获取值的字段是否一样
2. 获取方式有没有问题，是从ETF上去还是REC上取数据要确认清楚
3. 把所有可能干扰数据显示的代码都干掉或注释掉，专心打印你想获取到的字段值
4. 如果上述都已经做了，那还是很有可能后台没有传出来。   

